import{u as a,c as t,w as c,_ as p,o as r,a as s,d as l}from"./app-b1fb3549.js";const y=s("div",{class:"prose m-auto"},[s("p",null,[l("When you build multiple entries in a single package, you exports them with "),s("code",null,"exports"),l(" syntax. Like")]),s("pre",null,[s("code",{class:"language-json"},[s("div",{class:"shiki-container"},[s("pre",{class:"shiki shiki-dark",style:{"background-color":"#121212"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#666666"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CAEE"}},"  "),s("span",{style:{color:"#B8A965AA"}},'"'),s("span",{style:{color:"#B8A965"}},"exports"),s("span",{style:{color:"#B8A965AA"}},'"'),s("span",{style:{color:"#666666"}},":"),s("span",{style:{color:"#DBD7CAEE"}}," "),s("span",{style:{color:"#666666"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CAEE"}},"    "),s("span",{style:{color:"#B8A965AA"}},'"'),s("span",{style:{color:"#B8A965"}},"."),s("span",{style:{color:"#B8A965AA"}},'"'),s("span",{style:{color:"#666666"}},":"),s("span",{style:{color:"#DBD7CAEE"}}," "),s("span",{style:{color:"#666666"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CAEE"}},"      "),s("span",{style:{color:"#B8A965AA"}},'"'),s("span",{style:{color:"#B8A965"}},"types"),s("span",{style:{color:"#B8A965AA"}},'"'),s("span",{style:{color:"#666666"}},":"),s("span",{style:{color:"#DBD7CAEE"}}," "),s("span",{style:{color:"#C98A7DAA"}},'"'),s("span",{style:{color:"#C98A7D"}},"./dist/index.d.ts"),s("span",{style:{color:"#C98A7DAA"}},'"'),s("span",{style:{color:"#666666"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CAEE"}},"      "),s("span",{style:{color:"#B8A965AA"}},'"'),s("span",{style:{color:"#B8A965"}},"import"),s("span",{style:{color:"#B8A965AA"}},'"'),s("span",{style:{color:"#666666"}},":"),s("span",{style:{color:"#DBD7CAEE"}}," "),s("span",{style:{color:"#C98A7DAA"}},'"'),s("span",{style:{color:"#C98A7D"}},"./dist/index.mjs"),s("span",{style:{color:"#C98A7DAA"}},'"'),s("span",{style:{color:"#666666"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CAEE"}},"      "),s("span",{style:{color:"#B8A965AA"}},'"'),s("span",{style:{color:"#B8A965"}},"require"),s("span",{style:{color:"#B8A965AA"}},'"'),s("span",{style:{color:"#666666"}},":"),s("span",{style:{color:"#DBD7CAEE"}}," "),s("span",{style:{color:"#C98A7DAA"}},'"'),s("span",{style:{color:"#C98A7D"}},"./dist/index.cjs"),s("span",{style:{color:"#C98A7DAA"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CAEE"}},"    "),s("span",{style:{color:"#666666"}},"},")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CAEE"}},"    "),s("span",{style:{color:"#B8A965AA"}},'"'),s("span",{style:{color:"#B8A965"}},"./foo"),s("span",{style:{color:"#B8A965AA"}},'"'),s("span",{style:{color:"#666666"}},":"),s("span",{style:{color:"#DBD7CAEE"}}," "),s("span",{style:{color:"#666666"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CAEE"}},"      "),s("span",{style:{color:"#B8A965AA"}},'"'),s("span",{style:{color:"#B8A965"}},"types"),s("span",{style:{color:"#B8A965AA"}},'"'),s("span",{style:{color:"#666666"}},":"),s("span",{style:{color:"#DBD7CAEE"}}," "),s("span",{style:{color:"#C98A7DAA"}},'"'),s("span",{style:{color:"#C98A7D"}},"./dist/foo.d.ts"),s("span",{style:{color:"#C98A7DAA"}},'"'),s("span",{style:{color:"#666666"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CAEE"}},"      "),s("span",{style:{color:"#B8A965AA"}},'"'),s("span",{style:{color:"#B8A965"}},"import"),s("span",{style:{color:"#B8A965AA"}},'"'),s("span",{style:{color:"#666666"}},":"),s("span",{style:{color:"#DBD7CAEE"}}," "),s("span",{style:{color:"#C98A7DAA"}},'"'),s("span",{style:{color:"#C98A7D"}},"./dist/foo.mjs"),s("span",{style:{color:"#C98A7DAA"}},'"'),s("span",{style:{color:"#666666"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CAEE"}},"      "),s("span",{style:{color:"#B8A965AA"}},'"'),s("span",{style:{color:"#B8A965"}},"require"),s("span",{style:{color:"#B8A965AA"}},'"'),s("span",{style:{color:"#666666"}},":"),s("span",{style:{color:"#DBD7CAEE"}}," "),s("span",{style:{color:"#C98A7DAA"}},'"'),s("span",{style:{color:"#C98A7D"}},"./dist/foo.cjs"),s("span",{style:{color:"#C98A7DAA"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CAEE"}},"    "),s("span",{style:{color:"#666666"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CAEE"}},"  "),s("span",{style:{color:"#666666"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#666666"}},"}")]),l(`
`),s("span",{class:"line"})])]),s("pre",{class:"shiki shiki-light",style:{"background-color":"#ffffff"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#999999"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"  "),s("span",{style:{color:"#998418AA"}},'"'),s("span",{style:{color:"#998418"}},"exports"),s("span",{style:{color:"#998418AA"}},'"'),s("span",{style:{color:"#999999"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#999999"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"    "),s("span",{style:{color:"#998418AA"}},'"'),s("span",{style:{color:"#998418"}},"."),s("span",{style:{color:"#998418AA"}},'"'),s("span",{style:{color:"#999999"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#999999"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"      "),s("span",{style:{color:"#998418AA"}},'"'),s("span",{style:{color:"#998418"}},"types"),s("span",{style:{color:"#998418AA"}},'"'),s("span",{style:{color:"#999999"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#B56959AA"}},'"'),s("span",{style:{color:"#B56959"}},"./dist/index.d.ts"),s("span",{style:{color:"#B56959AA"}},'"'),s("span",{style:{color:"#999999"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"      "),s("span",{style:{color:"#998418AA"}},'"'),s("span",{style:{color:"#998418"}},"import"),s("span",{style:{color:"#998418AA"}},'"'),s("span",{style:{color:"#999999"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#B56959AA"}},'"'),s("span",{style:{color:"#B56959"}},"./dist/index.mjs"),s("span",{style:{color:"#B56959AA"}},'"'),s("span",{style:{color:"#999999"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"      "),s("span",{style:{color:"#998418AA"}},'"'),s("span",{style:{color:"#998418"}},"require"),s("span",{style:{color:"#998418AA"}},'"'),s("span",{style:{color:"#999999"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#B56959AA"}},'"'),s("span",{style:{color:"#B56959"}},"./dist/index.cjs"),s("span",{style:{color:"#B56959AA"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"    "),s("span",{style:{color:"#999999"}},"},")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"    "),s("span",{style:{color:"#998418AA"}},'"'),s("span",{style:{color:"#998418"}},"./foo"),s("span",{style:{color:"#998418AA"}},'"'),s("span",{style:{color:"#999999"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#999999"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"      "),s("span",{style:{color:"#998418AA"}},'"'),s("span",{style:{color:"#998418"}},"types"),s("span",{style:{color:"#998418AA"}},'"'),s("span",{style:{color:"#999999"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#B56959AA"}},'"'),s("span",{style:{color:"#B56959"}},"./dist/foo.d.ts"),s("span",{style:{color:"#B56959AA"}},'"'),s("span",{style:{color:"#999999"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"      "),s("span",{style:{color:"#998418AA"}},'"'),s("span",{style:{color:"#998418"}},"import"),s("span",{style:{color:"#998418AA"}},'"'),s("span",{style:{color:"#999999"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#B56959AA"}},'"'),s("span",{style:{color:"#B56959"}},"./dist/foo.mjs"),s("span",{style:{color:"#B56959AA"}},'"'),s("span",{style:{color:"#999999"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"      "),s("span",{style:{color:"#998418AA"}},'"'),s("span",{style:{color:"#998418"}},"require"),s("span",{style:{color:"#998418AA"}},'"'),s("span",{style:{color:"#999999"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#B56959AA"}},'"'),s("span",{style:{color:"#B56959"}},"./dist/foo.cjs"),s("span",{style:{color:"#B56959AA"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"    "),s("span",{style:{color:"#999999"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"  "),s("span",{style:{color:"#999999"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999"}},"}")]),l(`
`),s("span",{class:"line"})])])])])]),s("p",null,[l("Then tho you provide "),s("code",null,"types"),l(" field for the sub modules, most of the users still got the error:")]),s("pre",null,[s("code",{class:"language-txt"},[s("div",{class:"shiki-container"},[s("pre",{class:"shiki shiki-dark",style:{"background-color":"#121212"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#dbd7caee"}},"Cannot find module 'my-pkg/foo' or its corresponding type declarations.")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#dbd7caee"}})])])]),s("pre",{class:"shiki shiki-light",style:{"background-color":"#ffffff"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#393a34"}},"Cannot find module 'my-pkg/foo' or its corresponding type declarations.")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393a34"}})])])])])])]),s("p",null,[l("Well thatâ€™s because the "),s("code",null,"types"),l(" field in "),s("code",null,"exports"),l(" will only be resolved when you add "),s("code",null,'"moduleResolution": "NodeNext"'),l(" to the "),s("code",null,"tsconfig.json"),l(" file. Which might cause more issue since not all the packages are up to date.")]),s("p",null,[l("So when you trying to import "),s("code",null,"my-pkg/foo"),l(", TypeScript actually looking for the "),s("code",null,"foo.d.ts"),l(" file under your package root instead of your "),s("code",null,"dist"),l(" folder. One solution I been used for a long time is to create a redirection file that published to npm, like:")]),s("pre",null,[s("code",{class:"language-ts"},[s("div",{class:"shiki-container"},[s("pre",{class:"shiki shiki-dark",style:{"background-color":"#121212"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#758575DD"}},"// foo.d.ts")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#4D9375"}},"export"),s("span",{style:{color:"#DBD7CAEE"}}," "),s("span",{style:{color:"#666666"}},"{"),s("span",{style:{color:"#DBD7CAEE"}}," "),s("span",{style:{color:"#4D9375"}},"default"),s("span",{style:{color:"#DBD7CAEE"}}," "),s("span",{style:{color:"#666666"}},"}"),s("span",{style:{color:"#DBD7CAEE"}}," "),s("span",{style:{color:"#4D9375"}},"from"),s("span",{style:{color:"#DBD7CAEE"}}," "),s("span",{style:{color:"#C98A7DAA"}},"'"),s("span",{style:{color:"#C98A7D"}},"./dist/foo.d.ts"),s("span",{style:{color:"#C98A7DAA"}},"'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#4D9375"}},"export"),s("span",{style:{color:"#DBD7CAEE"}}," "),s("span",{style:{color:"#4D9375"}},"*"),s("span",{style:{color:"#DBD7CAEE"}}," "),s("span",{style:{color:"#4D9375"}},"from"),s("span",{style:{color:"#DBD7CAEE"}}," "),s("span",{style:{color:"#C98A7DAA"}},"'"),s("span",{style:{color:"#C98A7D"}},"./dist/foo.d.ts"),s("span",{style:{color:"#C98A7DAA"}},"'")]),l(`
`),s("span",{class:"line"})])]),s("pre",{class:"shiki shiki-light",style:{"background-color":"#ffffff"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#A0ADA0"}},"// foo.d.ts")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F"}},"export"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#999999"}},"{"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#1E754F"}},"default"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#999999"}},"}"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#1E754F"}},"from"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#B56959AA"}},"'"),s("span",{style:{color:"#B56959"}},"./dist/foo.d.ts"),s("span",{style:{color:"#B56959AA"}},"'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F"}},"export"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#1E754F"}},"*"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#1E754F"}},"from"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#B56959AA"}},"'"),s("span",{style:{color:"#B56959"}},"./dist/foo.d.ts"),s("span",{style:{color:"#B56959AA"}},"'")]),l(`
`),s("span",{class:"line"})])])])])]),s("p",null,"Which solve the problem, but also making your root directory quite messy."),s("p",null,[l("Until "),s("a",{href:"https://github.com/tmkx",target:"_blank",rel:"noopener"},"@tmkx"),l(),s("a",{href:"https://github.com/antfu/unplugin-auto-import/pull/120",target:"_blank",rel:"noopener"},"shared me"),l(" this solution:")]),s("pre",null,[s("code",{class:"language-json"},[s("div",{class:"shiki-container"},[s("pre",{class:"shiki shiki-dark",style:{"background-color":"#121212"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#666666"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CAEE"}},"  "),s("span",{style:{color:"#B8A965AA"}},'"'),s("span",{style:{color:"#B8A965"}},"typesVersions"),s("span",{style:{color:"#B8A965AA"}},'"'),s("span",{style:{color:"#666666"}},":"),s("span",{style:{color:"#DBD7CAEE"}}," "),s("span",{style:{color:"#666666"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CAEE"}},"    "),s("span",{style:{color:"#B8A965AA"}},'"'),s("span",{style:{color:"#B8A965"}},"*"),s("span",{style:{color:"#B8A965AA"}},'"'),s("span",{style:{color:"#666666"}},":"),s("span",{style:{color:"#DBD7CAEE"}}," "),s("span",{style:{color:"#666666"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CAEE"}},"      "),s("span",{style:{color:"#B8A965AA"}},'"'),s("span",{style:{color:"#B8A965"}},"*"),s("span",{style:{color:"#B8A965AA"}},'"'),s("span",{style:{color:"#666666"}},":"),s("span",{style:{color:"#DBD7CAEE"}}," "),s("span",{style:{color:"#666666"}},"[")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CAEE"}},"        "),s("span",{style:{color:"#C98A7DAA"}},'"'),s("span",{style:{color:"#C98A7D"}},"./dist/index.d.ts"),s("span",{style:{color:"#C98A7DAA"}},'"'),s("span",{style:{color:"#666666"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CAEE"}},"        "),s("span",{style:{color:"#C98A7DAA"}},'"'),s("span",{style:{color:"#C98A7D"}},"./dist/*"),s("span",{style:{color:"#C98A7DAA"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CAEE"}},"      "),s("span",{style:{color:"#666666"}},"]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CAEE"}},"    "),s("span",{style:{color:"#666666"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CAEE"}},"  "),s("span",{style:{color:"#666666"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#666666"}},"}")]),l(`
`),s("span",{class:"line"})])]),s("pre",{class:"shiki shiki-light",style:{"background-color":"#ffffff"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#999999"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"  "),s("span",{style:{color:"#998418AA"}},'"'),s("span",{style:{color:"#998418"}},"typesVersions"),s("span",{style:{color:"#998418AA"}},'"'),s("span",{style:{color:"#999999"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#999999"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"    "),s("span",{style:{color:"#998418AA"}},'"'),s("span",{style:{color:"#998418"}},"*"),s("span",{style:{color:"#998418AA"}},'"'),s("span",{style:{color:"#999999"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#999999"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"      "),s("span",{style:{color:"#998418AA"}},'"'),s("span",{style:{color:"#998418"}},"*"),s("span",{style:{color:"#998418AA"}},'"'),s("span",{style:{color:"#999999"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#999999"}},"[")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"        "),s("span",{style:{color:"#B56959AA"}},'"'),s("span",{style:{color:"#B56959"}},"./dist/index.d.ts"),s("span",{style:{color:"#B56959AA"}},'"'),s("span",{style:{color:"#999999"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"        "),s("span",{style:{color:"#B56959AA"}},'"'),s("span",{style:{color:"#B56959"}},"./dist/*"),s("span",{style:{color:"#B56959AA"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"      "),s("span",{style:{color:"#999999"}},"]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"    "),s("span",{style:{color:"#999999"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"  "),s("span",{style:{color:"#999999"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999"}},"}")]),l(`
`),s("span",{class:"line"})])])])])]),s("p",null,[l("Good day! "),s("a",{href:"https://www.typescriptlang.org/docs/handbook/declaration-files/publishing.html#version-selection-with-typesversions",target:"_blank",rel:"noopener"},"Reference")])],-1),B="Types for Submodules",f="2021-03-01T16:00:00.000Z",E="en",m="5min",g="https://antfu.me/og/types-for-sub-modules.png",C=[{property:"og:title",content:"Types for Submodules"},{property:"og:image",content:"https://antfu.me/og/types-for-sub-modules.png"},{name:"twitter:card",content:"summary_large_image"}],h={__name:"types-for-sub-modules",setup(A,{expose:e}){const o={title:"Types for Submodules",date:"2021-03-01T16:00:00.000Z",lang:"en",duration:"5min",image:"https://antfu.me/og/types-for-sub-modules.png",meta:[{property:"og:title",content:"Types for Submodules"},{property:"og:image",content:"https://antfu.me/og/types-for-sub-modules.png"},{name:"twitter:card",content:"summary_large_image"}]};return e({frontmatter:o}),a({title:"Types for Submodules",meta:[{property:"og:title",content:"Types for Submodules"},{property:"og:image",content:"https://antfu.me/og/types-for-sub-modules.png"},{name:"twitter:card",content:"summary_large_image"}]}),(d,D)=>{const n=p;return r(),t(n,{frontmatter:o},{default:c(()=>[y]),_:1})}}};export{f as date,h as default,m as duration,g as image,E as lang,C as meta,B as title};
